# Phase 6: Supabase ì„¤ì • ê°€ì´ë“œ

> **ëª©í‘œ**: ê³¨ì¡°ê³µì‚¬ ìƒ˜í”Œ ë°ì´í„°ë¥¼ Supabaseì— êµ¬ì¶•  
> **ì˜ˆìƒ ì‹œê°„**: 30ë¶„ - 1ì‹œê°„

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Step 1: Supabase í”„ë¡œì íŠ¸ í™•ì¸ (5ë¶„)
- [ ] Supabase Dashboard ì ‘ì† (https://supabase.com/dashboard)
- [ ] í”„ë¡œì íŠ¸ ì„ íƒ (ë˜ëŠ” ìƒˆë¡œ ìƒì„±)
- [ ] Project URL í™•ì¸
- [ ] Anon Key í™•ì¸

### Step 2: ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì‹¤í–‰ (10ë¶„)
- [ ] SQL Editor ì—´ê¸°
- [ ] `schema-projects.sql` íŒŒì¼ ì—´ê¸°
- [ ] ì „ì²´ ë‚´ìš© ë³µì‚¬
- [ ] SQL Editorì— ë¶™ì—¬ë„£ê¸°
- [ ] `Run` ë²„íŠ¼ í´ë¦­
- [ ] ì„±ê³µ ë©”ì‹œì§€ í™•ì¸

### Step 3: ìƒ˜í”Œ ë°ì´í„° ì‹¤í–‰ (10ë¶„)
- [ ] `seed-construction-sample.sql` íŒŒì¼ ì—´ê¸°
- [ ] ì „ì²´ ë‚´ìš© ë³µì‚¬
- [ ] SQL Editorì— ë¶™ì—¬ë„£ê¸° (ìƒˆ ì¿¼ë¦¬ ë˜ëŠ” ê¸°ì¡´ íƒ­)
- [ ] `Run` ë²„íŠ¼ í´ë¦­
- [ ] í™•ì¸ ì¿¼ë¦¬ ê²°ê³¼ í™•ì¸

### Step 4: ë°ì´í„° ê²€ì¦ (5ë¶„)
- [ ] Table Editorì—ì„œ `projects` í…Œì´ë¸” ì—´ê¸°
- [ ] 1ê°œ í–‰ í™•ì¸ (ê³¨ì¡°ê³µì‚¬)
- [ ] `gantt_charts` í…Œì´ë¸”: 1ê°œ í–‰
- [ ] `tasks` í…Œì´ë¸”: 18ê°œ í–‰
- [ ] `links` í…Œì´ë¸”: 5ê°œ í–‰

### Step 5: í™˜ê²½ë³€ìˆ˜ ì„¤ì • (5ë¶„)
- [ ] `.env.local` íŒŒì¼ ì—´ê¸°
- [ ] Supabase ì •ë³´ ì…ë ¥
- [ ] Mock ëª¨ë“œ ë¹„í™œì„±í™”

### Step 6: ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ (10ë¶„)
- [ ] ì„œë²„ ì¬ì‹œì‘ (`npm run dev`)
- [ ] í”„ë¡œì íŠ¸ ëª©ë¡ í™•ì¸
- [ ] ê³¨ì¡°ê³µì‚¬ í”„ë¡œì íŠ¸ ì—´ê¸°
- [ ] Gantt ì°¨íŠ¸ ì—´ê¸°
- [ ] Task 18ê°œ í™•ì¸

---

## ğŸš€ ìƒì„¸ ì‹¤í–‰ ê°€ì´ë“œ

### Step 1: Supabase Dashboard ì ‘ì†

1. **ì ‘ì†**: https://supabase.com/dashboard
2. **ë¡œê·¸ì¸**: GitHub ë˜ëŠ” ì´ë©”ì¼
3. **í”„ë¡œì íŠ¸ ì„ íƒ**: ê¸°ì¡´ í”„ë¡œì íŠ¸ ë˜ëŠ” "New Project" í´ë¦­

**í”„ë¡œì íŠ¸ ì •ë³´ í™•ì¸**:
```
Project Settings â†’ API
â”œâ”€ Project URL: https://xxxxx.supabase.co
â””â”€ Anon public key: eyJhbGciOiJI...
```

---

### Step 2: ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì‹¤í–‰

1. **SQL Editor ì—´ê¸°**:
   - ì™¼ìª½ ë©”ë‰´ â†’ `SQL Editor`
   - ë˜ëŠ” `Database` â†’ `SQL Editor`

2. **ìƒˆ ì¿¼ë¦¬ ìƒì„±**:
   - `New query` ë²„íŠ¼ í´ë¦­

3. **SQL ë³µì‚¬ & ì‹¤í–‰**:
   ```sql
   -- schema-projects.sql ì „ì²´ ë‚´ìš© ë³µì‚¬
   -- SQL Editorì— ë¶™ì—¬ë„£ê¸°
   -- Run ë²„íŠ¼ (ë˜ëŠ” Ctrl/Cmd + Enter)
   ```

4. **ì„±ê³µ í™•ì¸**:
   ```
   Success. No rows returned
   ```

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… `projects` í…Œì´ë¸” ìƒì„±
- âœ… `project_members` í…Œì´ë¸” ìƒì„±
- âœ… `gantt_charts` í…Œì´ë¸” ìƒì„±
- âœ… `tasks` í…Œì´ë¸” ìƒì„±
- âœ… `links` í…Œì´ë¸” ìƒì„±
- âœ… RLS ì •ì±… 12ê°œ ì„¤ì •

**í™•ì¸ ë°©ë²•**:
```sql
-- í…Œì´ë¸” ëª©ë¡ í™•ì¸
SELECT tablename 
FROM pg_tables 
WHERE schemaname = 'public' 
  AND tablename IN ('projects', 'project_members', 'gantt_charts', 'tasks', 'links');
```

---

### Step 3: ìƒ˜í”Œ ë°ì´í„° ì‹¤í–‰

1. **ìƒˆ ì¿¼ë¦¬ íƒ­**:
   - `New query` ë²„íŠ¼ í´ë¦­

2. **SQL ë³µì‚¬ & ì‹¤í–‰**:
   ```sql
   -- seed-construction-sample.sql ì „ì²´ ë‚´ìš© ë³µì‚¬
   -- SQL Editorì— ë¶™ì—¬ë„£ê¸°
   -- Run ë²„íŠ¼
   ```

3. **ì„±ê³µ í™•ì¸**:
   - ë§ˆì§€ë§‰ í™•ì¸ ì¿¼ë¦¬ ê²°ê³¼ê°€ í‘œì‹œë¨
   - Projects: 1ê°œ
   - Gantt Charts: 1ê°œ
   - Tasks: 18ê°œ (typeë³„ í†µê³„)
   - Links: 5ê°œ

**ì˜ˆìƒ ì¶œë ¥**:
```
-- í”„ë¡œì íŠ¸
id: a0000000-0000-0000-0000-000000000100
name: ì„œìš¸ ê°•ë‚¨ ì˜¤í”¼ìŠ¤ ë¹Œë”© ì‹ ì¶• - ì§€í•˜ ê³¨ì¡°ê³µì‚¬
contract_amount: 2,500,000,000ì›

-- Tasks í†µê³„
type     | task_count | avg_progress
---------+------------+-------------
milestone|     2      |     0
summary  |     3      |    56
task     |    13      |    43
```

---

### Step 4: ë°ì´í„° ê²€ì¦

#### 4-1. Table Editor í™•ì¸

**Projects í…Œì´ë¸”**:
1. ì™¼ìª½ ë©”ë‰´ â†’ `Table Editor`
2. `projects` ì„ íƒ
3. **í™•ì¸ ì‚¬í•­**:
   - âœ… 1ê°œ í–‰
   - âœ… name: "ì„œìš¸ ê°•ë‚¨ ì˜¤í”¼ìŠ¤ ë¹Œë”© ì‹ ì¶• - ì§€í•˜ ê³¨ì¡°ê³µì‚¬"
   - âœ… status: "active"
   - âœ… contract_amount: 2500000000

**Gantt Charts í…Œì´ë¸”**:
1. `gantt_charts` ì„ íƒ
2. **í™•ì¸ ì‚¬í•­**:
   - âœ… 1ê°œ í–‰
   - âœ… name: "CP ì§€í•˜ê³¨ì¡° ê³µì •í‘œ"
   - âœ… project_id: a0000000-0000-0000-0000-000000000100

**Tasks í…Œì´ë¸”**:
1. `tasks` ì„ íƒ
2. **í™•ì¸ ì‚¬í•­**:
   - âœ… 18ê°œ í–‰
   - âœ… text: "CP ì§€í•˜ê³¨ì¡°(ë²½ì²´+ìŠ¬ë˜ë¸Œ)", "ë²½ì²´(ìœ ë¡œí¼)" ë“±
   - âœ… type: summary, task, milestone
   - âœ… parent_id: ê³„ì¸µ êµ¬ì¡°

**Links í…Œì´ë¸”**:
1. `links` ì„ íƒ
2. **í™•ì¸ ì‚¬í•­**:
   - âœ… 5ê°œ í–‰
   - âœ… type: e2s
   - âœ… source/target: UUID

#### 4-2. SQL ì¿¼ë¦¬ë¡œ ê²€ì¦

```sql
-- ê³„ì¸µ êµ¬ì¡° í™•ì¸
SELECT 
  t1.text as parent,
  t2.text as child,
  t2.type,
  t2.progress
FROM tasks t1
RIGHT JOIN tasks t2 ON t1.id = t2.parent_id
WHERE t2.gantt_chart_id = 'b0000000-0000-0000-0000-000000000100'
ORDER BY t2.position;
```

**ì˜ˆìƒ ê²°ê³¼**:
```
parent                    | child                    | type      | progress
--------------------------+--------------------------+-----------+---------
NULL                      | CP ì§€í•˜ê³¨ì¡°(ë²½ì²´+ìŠ¬ë˜ë¸Œ)  | summary   | 52
CP ì§€í•˜ê³¨ì¡°(ë²½ì²´+ìŠ¬ë˜ë¸Œ)   | ë²½ì²´(ìœ ë¡œí¼)             | summary   | 86
ë²½ì²´(ìœ ë¡œí¼)              | ì² ê·¼ í˜„ì¥ì¡°ë¦½            | task      | 100
...
```

---

### Step 5: í™˜ê²½ë³€ìˆ˜ ì„¤ì •

**íŒŒì¼**: `.env.local`

#### 5-1. Supabase ëª¨ë“œ í™œì„±í™”

```bash
# Supabase ì„¤ì •
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Mock ëª¨ë“œ ë¹„í™œì„±í™”
NEXT_PUBLIC_USE_MOCK=false
```

#### 5-2. Mock ëª¨ë“œ ë°±ì—… (ì„ íƒ)

```bash
# .env.local.backup íŒŒì¼ë¡œ ì €ì¥
# ë‚˜ì¤‘ì— Mock ëª¨ë“œë¡œ ëŒì•„ê°ˆ ë•Œ ì‚¬ìš©

# Mock ëª¨ë“œ ì„¤ì •
NEXT_PUBLIC_USE_MOCK=true
# NEXT_PUBLIC_SUPABASE_URL=...
# NEXT_PUBLIC_SUPABASE_ANON_KEY=...
```

---

### Step 6: ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸

#### 6-1. ì„œë²„ ì¬ì‹œì‘

```bash
cd /Users/1ncarnati0n/Desktop/tsxPJT/contech-dx

# ê¸°ì¡´ ì„œë²„ ì¢…ë£Œ (Ctrl+C)
# ì„œë²„ ì¬ì‹œì‘
npm run dev
```

#### 6-2. í”„ë¡œì íŠ¸ ëª©ë¡ í™•ì¸

**ì ‘ì†**: http://localhost:3000/projects

**í™•ì¸ ì‚¬í•­**:
- âœ… 1ê°œ í”„ë¡œì íŠ¸ ì¹´ë“œ í‘œì‹œ
- âœ… "ì„œìš¸ ê°•ë‚¨ ì˜¤í”¼ìŠ¤ ë¹Œë”© ì‹ ì¶• - ì§€í•˜ ê³¨ì¡°ê³µì‚¬"
- âœ… ìƒíƒœ ë°°ì§€: "ì§„í–‰ì¤‘" (ì´ˆë¡ìƒ‰)
- âœ… ìœ„ì¹˜: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123
- âœ… ê³„ì•½ê¸ˆì•¡: â‚©2,500,000,000

#### 6-3. í”„ë¡œì íŠ¸ ìƒì„¸ í™•ì¸

**ì ‘ì†**: í”„ë¡œì íŠ¸ ì¹´ë“œ í´ë¦­

**í™•ì¸ ì‚¬í•­**:
- âœ… í”„ë¡œì íŠ¸ ì •ë³´ í‘œì‹œ
- âœ… Gantt ì°¨íŠ¸ 1ê°œ í‘œì‹œ
  - ì´ë¦„: "CP ì§€í•˜ê³¨ì¡° ê³µì •í‘œ"
  - ì„¤ëª…: "ë²½ì²´(ìœ ë¡œí¼) ë° ìŠ¬ë˜ë¸Œ(í•©íŒê±°í‘¸ì§‘) ìƒì„¸ ê³µì •"

#### 6-4. Gantt ì°¨íŠ¸ í™•ì¸

**ì ‘ì†**: Gantt ì°¨íŠ¸ ì¹´ë“œ í´ë¦­

**í™•ì¸ ì‚¬í•­**:
- âœ… Task 18ê°œ í‘œì‹œ
  - CP ì§€í•˜ê³¨ì¡°(ë²½ì²´+ìŠ¬ë˜ë¸Œ)
  - ë²½ì²´(ìœ ë¡œí¼)
  - ìŠ¬ë˜ë¸Œ(í•©íŒê±°í‘¸ì§‘)
  - ì² ê·¼ í˜„ì¥ì¡°ë¦½
  - ìœ ë¡œí¼ ì„¤ì¹˜
  - í•©íŒê±°í‘¸ì§‘ ì„¤ì¹˜
  - ì½˜í¬ë¦¬íŠ¸ íƒ€ì„¤
  - ì–‘ìƒ
  - ì£¼ ê³µì • ê²€ì¸¡
- âœ… Link 5ê°œ (í™”ì‚´í‘œ ì—°ê²°ì„ )
- âœ… Timeline: 2025ë…„ 11ì›” 4ì¼ ~ 11ì›” 24ì¼
- âœ… ì§„í–‰ë¥  í‘œì‹œ
- âœ… í†µê³„:
  - Tasks: 18ê°œ
  - Links: 5ê°œ
  - Milestones: 2ê°œ
  - ì „ì²´ ì§„í–‰ë¥ : ì•½ 43%

---

## âœ… ê²€ì¦ ì™„ë£Œ ê¸°ì¤€

ëª¨ë“  í•­ëª©ì´ ì²´í¬ë˜ì–´ì•¼ Phase 6 ì™„ë£Œ:

### ë°ì´í„°ë² ì´ìŠ¤
- [x] projects í…Œì´ë¸”: 1ê°œ í–‰
- [x] gantt_charts í…Œì´ë¸”: 1ê°œ í–‰
- [x] tasks í…Œì´ë¸”: 18ê°œ í–‰
- [x] links í…Œì´ë¸”: 5ê°œ í–‰
- [x] RLS ì •ì±…: ì •ìƒ ë™ì‘

### ì• í”Œë¦¬ì¼€ì´ì…˜
- [x] í”„ë¡œì íŠ¸ ëª©ë¡: 1ê°œ í‘œì‹œ
- [x] í”„ë¡œì íŠ¸ ìƒì„¸: ì •ë³´ í‘œì‹œ
- [x] Gantt ì°¨íŠ¸: 18ê°œ Task ë Œë”ë§
- [x] Link: 5ê°œ ì—°ê²°ì„  í‘œì‹œ
- [x] Timeline: 2025-11-04 ~ 2025-11-24
- [x] ì§„í–‰ë¥ : ì •ìƒ í‘œì‹œ

### ê¸°ëŠ¥
- [x] ë“œë˜ê·¸: Task ì´ë™ ê°€ëŠ¥
- [x] ë¦¬ì‚¬ì´ì¦ˆ: Task ê¸°ê°„ ì¡°ì • ê°€ëŠ¥
- [x] í™•ëŒ€/ì¶•ì†Œ: Timeline ì¡°ì • ê°€ëŠ¥
- [x] ê³„ì¸µ êµ¬ì¡°: summary â†’ task í‘œì‹œ

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: "relation does not exist"

**ì¦ìƒ**:
```
ERROR: relation "projects" does not exist
```

**ì›ì¸**: ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì‹¤í–‰ ì•ˆ ë¨

**í•´ê²°**:
1. `schema-projects.sql` ë¨¼ì € ì‹¤í–‰
2. ê·¸ ë‹¤ìŒ `seed-construction-sample.sql` ì‹¤í–‰

---

### ë¬¸ì œ 2: í”„ë¡œì íŠ¸ê°€ í‘œì‹œ ì•ˆ ë¨

**ì¦ìƒ**: í”„ë¡œì íŠ¸ ëª©ë¡ì´ ë¹„ì–´ìˆìŒ

**ì›ì¸**: 
- Mock ëª¨ë“œê°€ ì—¬ì „íˆ í™œì„±í™”
- í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì•ˆ ë¨

**í•´ê²°**:
```bash
# .env.local í™•ì¸
NEXT_PUBLIC_USE_MOCK=false  # ì´ê²Œ ì¤‘ìš”!
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
```

ì„œë²„ ì¬ì‹œì‘ í•„ìˆ˜!

---

### ë¬¸ì œ 3: RLS ì •ì±… ì—ëŸ¬

**ì¦ìƒ**:
```
ERROR: new row violates row-level security policy
```

**ì›ì¸**: RLS ì •ì±…ì´ ì œëŒ€ë¡œ ì„¤ì • ì•ˆ ë¨

**í•´ê²°**:
```sql
-- RLS ì •ì±… í™•ì¸
SELECT schemaname, tablename, policyname, cmd
FROM pg_policies
WHERE tablename IN ('projects', 'tasks', 'links');
```

ì •ì±…ì´ ì—†ìœ¼ë©´ `schema-projects.sql` ë‹¤ì‹œ ì‹¤í–‰

---

### ë¬¸ì œ 4: Taskê°€ í‘œì‹œ ì•ˆ ë¨

**ì¦ìƒ**: Gantt ì°¨íŠ¸ê°€ ë¹„ì–´ìˆìŒ

**ì›ì¸**: 
- ë‚ ì§œ í˜•ì‹ ë¬¸ì œ
- gantt_chart_id ë¶ˆì¼ì¹˜

**í•´ê²°**:
```sql
-- Tasks í™•ì¸
SELECT id, text, start_date, end_date, gantt_chart_id
FROM tasks
WHERE gantt_chart_id = 'b0000000-0000-0000-0000-000000000100';
```

18ê°œ í–‰ì´ ë‚˜ì™€ì•¼ í•¨

---

## ğŸ‰ Phase 6 ì™„ë£Œ í›„

**ë‹¤ìŒ ë‹¨ê³„**:
- Phase 7: Mock.json í†µí•©
- Phase 8: ëŒ€ì‹œë³´ë“œ êµ¬í˜„

**í˜„ì¬ ë‹¬ì„±**:
- âœ… POC 80% â†’ 90%
- âœ… Mock ëª¨ë“œ â†’ Supabase ëª¨ë“œ
- âœ… ì‹¤ì œ ê±´ì¶• ë°ì´í„° êµ¬ì¶•
- âœ… Production Ready ë‹¨ê³„ ì§„ì…

---

**ì‘ì„±**: AI Assistant  
**ë²„ì „**: 1.0  
**ìƒíƒœ**: Phase 6 ê°€ì´ë“œ

